<!DOCTYPE html>
<html>

<head>
	<title>a-color-picker demo</title>
	<link href="https://cdn.rawgit.com/mochajs/mocha/2.2.5/mocha.css" rel="stylesheet" />
	<script src="https://cdn.rawgit.com/Automattic/expect.js/0.3.1/index.js"></script>
	<script src="https://cdn.rawgit.com/mochajs/mocha/2.2.5/mocha.js"></script>
</head>

<body>
	<div id="mocha"></div>
	<div class="container">
		<div>
			<button id="btnGetColor">get</button>
			<label>rgb</label>
			<input type="text" class="txt-color" data-prop="rgb">
			<label>rgba</label>
			<input type="text" class="txt-color" data-prop="rgba">
			<label>hsl</label>
			<input type="text" class="txt-color" data-prop="hsl">
			<label>hsla</label>
			<input type="text" class="txt-color" data-prop="hsla">
			<label>color</label>
			<input type="text" class="txt-color" data-prop="color">
		</div>
		<hr>
		<div class="picker" acp-show-alpha acp-palette-editable acp-palette="#fd0;black"></div>
		<div class="picker absolute" acp-show-rgb="no" acp-show-hsl="no" acp-palette="PALETTE_MATERIAL_CHROME"></div>
		<div class="container">
			<div class="picker absolute"></div>
		</div>
	</div>
	<script>
		mocha.setup('bdd');
		describe('Static functions', () => {
			it('parseColor with named color', () => {
				expect(AColorPicker.parseColor('red')).to.eql([255, 0, 0]);
			});
			it('parseColor with hex', () => {
				expect(AColorPicker.parseColor('#ff0000')).to.eql([255, 0, 0]);
			});
			it('parseColor with hex => rgba', () => {
				expect(AColorPicker.parseColor('#ff0000', 'rgba')).to.eql([255, 0, 0, 1]);
			});
			it('parseColor with hex 0% opacity => rgba', () => {
				expect(AColorPicker.parseColor('#ff000000', 'rgba')).to.eql([255, 0, 0, 0]);
			});
			it('parseColor with hex 50% opacity => rgba', () => {
				expect(AColorPicker.parseColor('#ff000080', 'rgba')).to.eql([255, 0, 0, .5]);
			});
			it('parseColor with short hex', () => {
				expect(AColorPicker.parseColor('#f00')).to.eql([255, 0, 0]);
			});
			it('parseColor with short hex => rgba', () => {
				expect(AColorPicker.parseColor('#f00', 'rgba')).to.eql([255, 0, 0, 1]);
			});
			it('parseColor with short hex 0% opacity => rgba', () => {
				expect(AColorPicker.parseColor('#f000', 'rgba')).to.eql([255, 0, 0, 0]);
			});
			it('parseColor with short hex  => rgba67% opacity', () => {
				expect(AColorPicker.parseColor('#f00a', 'rgba')).to.eql([255, 0, 0, .67]);
			});
			it('parseColor with color name  => hex + alpha', () => {
				expect(AColorPicker.parseColor('red', 'hexcss4')).to.eql('#ff0000ff');
			});
			it('parseColor with color name  => hex67% opacity', () => {
				expect(AColorPicker.parseColor('#f00a', 'hexcss4')).to.eql('#ff0000aa');
			});
			it('parseColor with color name  => hex0% opacity', () => {
				expect(AColorPicker.parseColor('#f000', 'hexcss4')).to.eql('#ff000000');
			});
			// RGB
			it('parseColor with rgb(<comma>)', () => {
				expect(AColorPicker.parseColor('rgb(255,0,0)')).to.eql([255, 0, 0]);
			});
			it('parseColor with rgb(<comma>) => rgba', () => {
				expect(AColorPicker.parseColor('rgb(255,0,0)', 'rgba')).to.eql([255, 0, 0, 1]);
			});
			it('parseColor with rgb(<space>)', () => {
				expect(AColorPicker.parseColor('rgb(255 0 0)')).to.eql([255, 0, 0]);
			});
			it('parseColor with rgb(<comma><space>)', () => {
				expect(AColorPicker.parseColor('rgb(255, 0, 0)')).to.eql([255, 0, 0]);
			});
			it('parseColor with rgb(<comma>) 50% opacity => rgba', () => {
				expect(AColorPicker.parseColor('rgb(255,0,0,.5)', 'rgba')).to.eql([255, 0, 0, .5]);
			});
			it('parseColor with rgb(<space>) 50% opacity => rgba', () => {
				expect(AColorPicker.parseColor('rgb(255 0 0 .5)', 'rgba')).to.eql([255, 0, 0, .5]);
			});
			it('parseColor with rgba(<comma>) 70% opacity => rgba', () => {
				expect(AColorPicker.parseColor('rgba(255,0,0,.7)', 'rgba')).to.eql([255, 0, 0, .7]);
			});
			it('parseColor with rgba(<space>) 70% opacity => rgba', () => {
				expect(AColorPicker.parseColor('rgba(255 0 0 .7)', 'rgba')).to.eql([255, 0, 0, .7]);
			});
			// HSL
			it('parseColor with hsl(<comma>)', () => {
				expect(AColorPicker.parseColor('hsl(0,100,50)')).to.eql([255, 0, 0]);
			});
			it('parseColor with hsl(<comma>) => rgba', () => {
				expect(AColorPicker.parseColor('hsl(0,100,50)', 'rgba')).to.eql([255, 0, 0, 1]);
			});
			it('parseColor with hsl(<space>)', () => {
				expect(AColorPicker.parseColor('hsl(0 100 50)')).to.eql([255, 0, 0]);
			});
			it('parseColor with hsl(<comma><space>)', () => {
				expect(AColorPicker.parseColor('hsl(0, 100, 50)')).to.eql([255, 0, 0]);
			});
			it('parseColor with hsl(<comma>) 50% opacity => rgba', () => {
				expect(AColorPicker.parseColor('hsl(0,100,50,.5)', 'rgba')).to.eql([255, 0, 0, .5]);
			});
			it('parseColor with hsl(<space>) 50% opacity => rgba', () => {
				expect(AColorPicker.parseColor('hsl(0 100 50 .5)', 'rgba')).to.eql([255, 0, 0, .5]);
			});
			it('parseColor with hsla(<comma>) 70% opacity => rgba', () => {
				expect(AColorPicker.parseColor('hsla(0,100,50,.7)', 'rgba')).to.eql([255, 0, 0, .7]);
			});
			it('parseColor with hsla(<space>) 70% opacity => rgba', () => {
				expect(AColorPicker.parseColor('hsla(0 100 50 .7)', 'rgba')).to.eql([255, 0, 0, .7]);
			});
			// all
			it('parseColor with named color => {}', () => {
				expect(JSON.stringify(AColorPicker.parseColor('red', {}))).to.eql('{"rgb":[255,0,0],"rgbcss":"rgb(255, 0, 0)","rgbcss4":"rgb(255, 0, 0, 1)","rgba":[255,0,0,1],"rgbacss":"rgba(255, 0, 0, 1)","hsl":[0,100,50],"hslcss":"hsl(0, 100, 50)","hslcss4":"hsl(0, 100, 50, 1)","hsla":[0,100,50,1],"hslacss":"hsla(0, 100, 50, 1)","hex":"#ff0000","hexcss4":"#ff0000ff","int":16711680}');
			});
			it('parseColor with named color => new Object()', () => {
				expect(JSON.stringify(AColorPicker.parseColor('red', new Object()))).to.eql('{"rgb":[255,0,0],"rgbcss":"rgb(255, 0, 0)","rgbcss4":"rgb(255, 0, 0, 1)","rgba":[255,0,0,1],"rgbacss":"rgba(255, 0, 0, 1)","hsl":[0,100,50],"hslcss":"hsl(0, 100, 50)","hslcss4":"hsl(0, 100, 50, 1)","hsla":[0,100,50,1],"hslacss":"hsla(0, 100, 50, 1)","hex":"#ff0000","hexcss4":"#ff0000ff","int":16711680}');
			});
			// default
			it('parseColor with named color => unknown outFormat', () => {
				expect(AColorPicker.parseColor('red', 'aaa')).to.eql([255, 0, 0]);
			});
			it('parseColor with named color => wrong case outFormat', () => {
				expect(AColorPicker.parseColor('red', 'HEXCSS4')).to.eql('#ff0000ff');
			});
			it('parseColor with named color => No plain object', () => {
				expect(AColorPicker.parseColor('red', new Date())).to.eql([255, 0, 0]);
			});
			it('parseColor with named color => class', () => {
				class a {};
				expect(AColorPicker.parseColor('red', new a())).to.eql([255, 0, 0]);
			});
		});
		setTimeout(() => {
			mocha.run();
		}, 500);
	</script>
</body>

</html>